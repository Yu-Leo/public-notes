{% load wall_tags %}
{% load static %}
{% get_categories as categories %}

<nav class="navbar navbar-expand-lg navbar-light purple-navbar text-white">
    <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'home' %}">
            <img src="{% static 'wall/img/logo.png' %}" alt="" width="32" height="32"
                 class="d-inline-block align-text-center rounded-circle">
            <span class="text-purple">Public</span><span class="text-pink">Notes</span>
        </a>

        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'about' %}">О проекте</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                       data-bs-toggle="dropdown" aria-expanded="false">
                        Категории
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        {% for item in categories%}
                        <li><a class="dropdown-item" href="{{item.get_absolute_url }}">{{ item.title }}
                            <span class="badge bg-secondary">{% get_notes_count_for_category item %}</span>
                        </a></li>
                        {% endfor %}
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'authors' %}">Авторы</a>
                </li>

                {% if request.user.is_authenticated %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'categories_list'%}">Добавить категорию</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'add_note' %}">Добавить заметку</a>
                </li>
                {% endif %}

            </ul>
        </div>

        <div class="">
            {% if request.user.is_authenticated %}
            <a class="btn btn-purple" href="{{ request.user.get_absolute_url }}" role="button"
               aria-disabled="true">
                {{ request.user.username }}</a>
            <a class="btn btn-outline-purple" href="{% url 'logout' %}" role="button">Выйти</a>
            {% else %}
            <a class="btn btn-outline-purple" href="{% url 'registration' %}" role="button">Регистрация</a>
            <a class="btn btn-purple" href="{% url 'login' %}" role="button">Войти</a>
            {% endif %}
        </div>

    </div>
</nav>
